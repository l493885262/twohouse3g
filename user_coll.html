<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1, user-scalable=no">
    <title>我的收藏-小区</title>
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="stylesheet" href="css/index.css">
</head>

<body>
<!-- header -->
<header class="per-head map-head">
	<a class="per-fh" href=""></a>
	<div class="map-menu">
		<a class="active" href="">小区</a>
		<a href="">房源</a>
	</div>
</header>

<!-- /header -->
<!-- 收藏列表 -->
<section class="fy-list">
	<div class="fy-con user-fy clearfix">
		<div class="user-sc clearfix">
			<a href="">
			<div class="user-sc-i fl">
				<div class="fy-l"><img class="lazyload" src="images/img1.png"><span class="fy-qf qf1">新房</span></div>
				<div class="fy-r">
					<h3>光明观澜印象</h3>
					<h4><span>5300元/m2</span><i class="zs1">在售</i></h4>
					<div class="fy-sq">
						<span style="color:#62cc47; border-color:#62cc47">学区房</span>
						<span style="color:#ff9934; border-color:#ff9934">地铁口</span>
					</div>
					<p class="mt2">[经开区]合肥翡翠路与云谷路交口西南角</p>
				</div>
			</div>
			</a>
			<div class="user-sc-t fl"><p>删除</p></div>
		</div>
	</div>
	<div class="fy-con user-fy clearfix">
		<div class="user-sc clearfix">
			<a href="">
			<div class="user-sc-i fl">
				<div class="fy-l"><img class="lazyload" src="images/img1.png"><span class="fy-qf qf1">新房</span></div>
				<div class="fy-r">
					<h3>光明观澜印象</h3>
					<h4><span>5300元/m2</span><i class="zs1">在售</i></h4>
					<div class="fy-sq">
						<span style="color:#62cc47; border-color:#62cc47">学区房</span>
						<span style="color:#ff9934; border-color:#ff9934">地铁口</span>
					</div>
					<p class="mt2">[经开区]合肥翡翠路与云谷路交口西南角</p>
				</div>
			</div>
			</a>
			<div class="user-sc-t fl"><p>删除</p></div>
		</div>
	</div>
	<div class="fy-con user-fy clearfix">
		<div class="user-sc clearfix">
			<a href="">
			<div class="user-sc-i fl">
				<div class="fy-l"><img class="lazyload" src="images/img1.png"><span class="fy-qf qf1">新房</span></div>
				<div class="fy-r">
					<h3>光明观澜印象</h3>
					<h4><span>5300元/m2</span><i class="zs1">在售</i></h4>
					<div class="fy-sq">
						<span style="color:#62cc47; border-color:#62cc47">学区房</span>
						<span style="color:#ff9934; border-color:#ff9934">地铁口</span>
					</div>
					<p class="mt2">[经开区]合肥翡翠路与云谷路交口西南角</p>
				</div>
			</div>
			</a>
			<div class="user-sc-t fl"><p>删除</p></div>
		</div>
	</div>
</section>
<!-- /收藏列表 -->
<script src="js/jquery.min.js"></script>
<script>
$(function() {
	 // 设定每一行的宽度=屏幕宽度+按钮宽度
    $(".user-sc").width($(".fy-con").width() + $(".user-sc-t").width());
    // 设定常规信息区域宽度=屏幕宽度
    $(".user-sc-i").width($(".fy-con").width());
    // 设定文字部分宽度（为了实现文字过长时在末尾显示...）
    // $(".line-normal-msg").width($(".user-sc-i").width() - 280);

    // 获取所有行，对每一行设置监听
    var lines = $(".user-sc-i");
    var len = lines.length; 
    var lastX, lastXForMobile;

    // 用于记录被按下的对象
    var pressedObj;  // 当前左滑的对象
    var lastLeftObj; // 上一个左滑的对象

    // 用于记录按下的点
    var start;

    // 网页在移动端运行时的监听
    for (var i = 0; i < len; ++i) {
        lines[i].addEventListener('touchstart', function(e){
            lastXForMobile = e.changedTouches[0].pageX;
            pressedObj = this; // 记录被按下的对象 

            // 记录开始按下时的点
            var touches = event.touches[0];
            start = { 
                x: touches.pageX, // 横坐标
                y: touches.pageY  // 纵坐标
            };
        });

        lines[i].addEventListener('touchmove',function(e){
            // 计算划动过程中x和y的变化量
            var touches = event.touches[0];
            delta = {
                x: touches.pageX - start.x,
                y: touches.pageY - start.y
            };

            // 横向位移大于纵向位移，阻止纵向滚动
            if (Math.abs(delta.x) > Math.abs(delta.y)) {
                event.preventDefault();
            }
        });

        lines[i].addEventListener('touchend', function(e){
            var diffX = e.changedTouches[0].pageX - lastXForMobile;
            if (diffX < -150) {
                $(pressedObj).animate({marginLeft:"-60px"}, 500); // 左滑
                lastLeftObj && lastLeftObj != pressedObj && 
                    $(lastLeftObj).animate({marginLeft:"0"}, 500); // 已经左滑状态的按钮右滑
                lastLeftObj = pressedObj; // 记录上一个左滑的对象
            } else if (diffX > 150) {
                $(pressedObj).animate({marginLeft:"0"}, 500); // 右滑
                lastLeftObj = null; // 清空上一个左滑的对象
            }
        });
    }
});
</script>
</body>
</html>